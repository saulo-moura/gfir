<style type="text/css">

   div#conteudo {
        padding:0px;
        margin:0px;
        margin-top:5px;
        xmargin-left:10px;
        padding:5px;
        xwidth:685px;
        width:98%;
    }

    div#conteudo img {
        text-align:center;

    }
    div#conteudo div#homeadministrar {
        width:100%;
        height:390px;
        text-align:center;
        text-align:left;
        border-top   : 1px solid #DADADA;
        border-bottom: 1px solid #DADADA;
        padding-top:0px;
        padding-bottom:0px;
        margin-top:3px;
        background:#900000;
    }
    
    div#imgswf {
        padding-top:0px;
        padding-bottom:0px;
        background: #FFFFFF url(imagens/administrar.jpg) no-repeat ;
        width:100%;
        height:390px;
        margin:0px;
        sopacity: 0.50;
        sfilter: alpha(opacity = 50);
        swidth: 100%; /* stupid IE */
        
        font-family : Calibri, Arial, Helvetica, sans-serif;
        font-size   : 20px;
        font-style  : normal;
        font-weight : bold;
        color       : #808080;
        color       : #900000;

        
}

    div#barra {
        margin-bottom:5px;
    }

    div#img {
        background-color:white;
        margin-top:3px;
        display:block;
        text-align:center;
        float:none;
        width:665px;
    }



    
    div#tit_home {
        float:right;
        padding-bottom: 2px;
        padding-top: 3px;
        padding-left: 5px;
        padding-right: 37px;
        margin-bottom: 14px;
        font-size: 12px;
        font-weight: bold;
        scolor: #B70909;
        background: #c9c9c9;
    }
    div#tit_home_img {
        float:right;
    }
    div#tit_home_img a {
        text-decoration:none;
    }
    
    div#tit_home_img a:visited {
        text-decoration:none;
    }
    div#logo_obra {
        position:absolute;
        top:20px;
        left:790px;
        width:153px;
        height:150px;
        background:#FFFFFF;
        background:transparent;
    }


    div#img_qualidade {
        float:left;
        font-weight: bold;
        background: transparent;
        background: #C0C0C0;
        width:100%;
        margin-top:30px;
        margin-left:30px;
        margin-bottom:1px;
        width:320px;
        height:25px;
        cursor:pointer;
        sborder:1px solid red;
    }
    div#img_qualidade:hover {
        border-bottom:2px solid #900000;
    }


    div#img_qualidade img {
        float:left;
        cursor:pointer;

    }
    div#img_qualidade a {
        text-decoration:none;
        margin-left:20px;
    }

    div#img_qualidade a:visited {
        text-decoration:none;
    }




    div#img_seguranca {
        float:left;
        font-weight: bold;
        background: transparent;
        background: #C0C0C0;
        width:100%;
        margin-left:30px;
        margin-bottom:1px;
        width:320px;
        height:25px;
        cursor:pointer;
        sborder:1px solid red;
    }
    div#img_seguranca:hover {
        border-bottom:2px solid #FFFFFF;
    }

    
    div#img_seguranca img {
        float:left;
        cursor:pointer;

    }
    div#img_seguranca a {
        text-decoration:none;
        margin-left:20px;
    }

    div#img_seguranca a:visited {
        text-decoration:none;
    }


    div#img_meio_ambiente {
        float:left;
        font-weight: bold;
        sbackground: transparent;
        sbackground: #FFFFFF;
        background: #C0C0C0;
        width:100%;
        margin-left:30px;
        margin-bottom:1px;
        width:320px;
        height:25px;
        cursor:pointer;
        sborder:1px solid red;
    }
    div#img_meio_ambiente:hover {
        border-bottom:2px solid #900000;
    }
    div#img_meio_ambiente img {
        float:left;
        cursor:pointer;

    }
    div#img_meio_ambiente a {
        text-decoration:none;
        margin-left:20px;
    }

    div#img_meio_ambiente a:visited {
        text-decoration:none;
    }



    div#img_saude {
        float:left;
        font-weight: bold;
        background: transparent;
        background: #C0C0C0;
        width:100%;
        margin-left:30px;
        margin-bottom:1px;
        width:320px;
        height:25px;
        cursor:pointer;
        sborder:1px solid red;
    }
    div#img_saude:hover {
        border-bottom:2px solid #900000;
    }


    div#img_saude img {
        float:left;
        cursor:pointer;

    }
    div#img_saude a {
        text-decoration:none;
        margin-left:20px;
    }

    div#img_saude a:visited {
        text-decoration:none;
    }






    div#img_responsabilidade_social {
        float:left;
        font-weight: bold;
        background: transparent;
        background: #C0C0C0;
        width:100%;
        margin-left:30px;
        margin-bottom:1px;
        width:320px;
        height:25px;
        cursor:pointer;
        sborder:1px solid red;
    }
    div#img_responsabilidade_social:hover {
        border-bottom:2px solid #900000;
    }


    div#img_responsabilidade_social img {
        float:left;
        cursor:pointer;

    }
    div#img_responsabilidade_social a {
        text-decoration:none;
        margin-left:20px;
    }


    div#img_responsabilidade_social a:visited {
        text-decoration:none;
    }

    div#pen_menu_OLD {
       width:98%;
       xbackground:#000000;

       Xbackground: transparent url(obj_file/funcao/pla_fundo.png) no-repeat center;
       
       xheight:800px;
       color:#FFFFFF;
       padding-left:5px;
    }
      div#pen_menu {


        background:#2F2FFF;
        color:#FFFFFF;
        xfont-size:30px;
        width:100%;
        background: -moz-linear-gradient(top, #2F2FFF 0%, #6FB7FF 50%, #DFDFFF 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff0000), color-stop(35%,#6FB7FF), color-stop(100%,#DFDFFF)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #2F2FFF 0%,#6FB7FF 50%,#DFDFFF 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #2F2FFF 0%,#6FB7FF 50%,#DFDFFF 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #2F2FFF 0%,#6FB7FF 50%,#DFDFFF 100%); /* IE10+ */
        background: linear-gradient(to bottom, #2F2FFF 0%,#6FB7FF 50%,#DFDFFF 100%); /* W3C */
        
        Xbackground: linear-gradient(to bottom, #E9E9E9 5%, #B5B5B5 50%,#E6E6E6 100%); /* W3C */
        
        xbackground: linear-gradient(to bottom, #E9E9E9 5%, #D1D1D1 50%,#E6E6E6 100%); /* W3C */

        
        background: linear-gradient(to bottom, #FFFFFF 5%, #FFFFFF 50%,#FFFFFF 100%); /* W3C */

        
        
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2F2FFF', endColorstr='#6FB7FF',GradientType=0 ); /* IE6-9 */
        border: 1px solid thick #c00000;
        xxborder-radius: 1em;
        xborder:1px solid  #0000A0;
        
        xxborder: 2px solid #a6a6a6;
        
        background:#FFFFFF;
    }

    div#pen_nomenclatura {
       cursor:pointer;
       xborder:2px solid #000000;
       background:transparent;
    }

.Sub_Menu {
       xbackground:#000000;
       background:transparent;
}

.situacao {
        xbackground:transparent;
        xbackground:#C00000;
        background:#0000FF;

        background: -moz-linear-gradient(top, #ff0000 0%, #FF6666 50%, #FFBBBB 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff0000), color-stop(35%,#FF6666), color-stop(100%,#FFBBBB)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #0000ff 0%,#FF6666 50%,#FFBBBB 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #ff0000 0%,#FF6666 50%,#FFBBBB 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #ff0000 0%,#FF6666 50%,#FFBBBB 100%); /* IE10+ */
        background: linear-gradient(to bottom, #0000ff 0%,#6666FF 50%,#BBBBFF 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff0000', endColorstr='#FFBBBB',GradientType=0 ); /* IE6-9 */

        border: 1px solid thick #c00000;
        border-radius: 1em;
        margin-top:1px;
        margin-left:1px;
        
        text-align:center;


       xcolor:#A60000;
       color:#FFFFFF;
       text-decoration:none;
       font-family: Arial, Calibri, Helvetica, sans-serif;
       font-size:12px;
       font-weight: bold;
       width :88px;
       display:block;
    }

div#pen_nomenclatura {
        float :left;
        xheight:120px;
        swidth :122px;
        width :90px;
        height:100px;
        border:0px;
        padding:2px;
        xborder:1px solid #a6a6a6;
        margin-left:0px;


        margin-bottom:5px;

        vertical-align: middle;

        display:table-cell;
        text-align:center;

        xbackground:#FFFFFF;
        background:transparent;

        border-radius: 1em;
    }



div#pen_nomenclatura_v {
        float :left;
        xheight:120px;
        swidth :122px;
        width :90px;
        height:100px;
        border:0px;
        padding:0px;
        xborder:1px solid #600000;
        margin-left:3px;


        margin-bottom:5px;

        vertical-align: middle;

        display:table-cell;
        text-align:center;

        background:transparent;

        border-radius: 1em;
    }

    .separa_secao {
        background:#0080C0;
        color:#FFFFFF;
        font-weight : bold;
        font-size:20px;
        text-align:center;
        
    }

</style>

<?php
$path="obj_file/funcao/";


$g_aberto = $_GET['g_aberto'];

echo '<br /">';

echo '<div id="pen_menu">';


$cod_idc  = '33.05.10';

$cod_idcw = $cod_idc.'%';
$cod_idcy = $cod_idc.'.';

$sql  = 'select ';
$sql .= '  fun.*   ';
$sql .= '  from funcao fun ';
$sql .= '  where fun.cod_classificacao like '.aspa($cod_idcw);
$sql .= "    and sts_menu='S' ";
$sql .= "    and linha > 0 ";
$sql .= '  order by grupo, linha, coluna ';

$rs = execsql($sql);

if ($rs->rows == 0) {
    echo "<div style='text-align:center; margin-top:30px; font-size:20px;'>";
    echo "Módulo em desenvolvimento";
    echo "</div>";}

echo '<table border="0" cellpadding="0" width="100%" cellspacing="0" class="Sub_Menu">';
//
$num_col_tab   = 8;

$num_lin_tab   = 5;

$imagem_nula   = "imagem_nula.png";


$col = 0;
$lin = 0;
$mostratopo=0;
//
$grupow = "###";
//
ForEach ($rs->data as $row) {
    $cod_classificacao = $row['cod_classificacao'];
    $nm_funcao         = $row['nm_funcao'];
    $cod_funcao        = $row['cod_funcao'];
    $des_prefixo       = $row['des_prefixo'];
    $imagem            = $row['imagem'];
    $linha             = $row['linha'];
    $coluna            = $row['coluna'];
    $texto_cab         = $row['texto_cab'];
    $hint              = $row['hint'];
    $detalhe           = $row['detalhe'];
    $visivel           = $row['visivel'];
    $grupo_classe      = $row['grupo_classe'];
    $grupo             = $row['grupo'];
    $quebrou = "";
    if ($grupo != $grupow and $grupo !=""  )
    {
        echo "    <tr> ";
        echo "    <td class='separa_secao' colspan='9'> ";
        
        $imagemf = "<img onclick='return fecha_grupo({$grupo});' id='img_grupo_{$grupo}' width='21' height='21' src='imagens/seta_baixo.png' style='cursor:pointer; ' title='Clique aqui para esconder os Elementos Estratégicos do Plano' />";
        echo ' <div id="" > ';
        echo "<a style='text-decoration:none; float:left;' >{$imagemf} $texto_cab</a>";
        echo ' </div>';

//        echo $texto_cab;
        echo "    </td> ";
        echo "    </tr> ";
        $grupow = $grupo;
        $quebrou = "mmmmmmmmmmmmmm";
        $col = 0;
        continue;
    }

    $mostratopo=0;
    if ($texto_cab!="")
    {
        $mostratopo=1;
    }
    $hintw=$hint;
    if ($hintw=="")
    {
        $hintw=$nm_funcao;
    }
    
    $cod_classificacao = str_replace($cod_idcy,'',$cod_classificacao);
    $vet = explode('.',$cod_classificacao);
    
    $classe_grupo="classe_grupo_{$grupo}";
    
    $tam = count($vet);
    if  ($tam>=1)
    {
         for ($c = 0; $c < 999; $c++)
         {
             if ($col == 0 or $col > 8 )
             {
                 if ($col != 0)
                 {
                     echo '    </tr> ';
                 }
                 echo "    <tr classe='$classe_grupo'> ";
                 $lin = $lin +1;
                 $col = 0;
             }
             $col = $col + 1;
             $existe=0;
             if ( ($linha>0 and $linha<6) and ($col>0 and $col<10) )
             {
                $existe=1;
             }
             
             //if ( ($linha = $lin and $coluna = $col) or ($existe==1) )
             
             if ( ($linha == $lin and $coluna == $col) )
             {
                 $disp   = "";
                 $classg = "";
                 if ($visivel=="N")
                 {
                     $disp=" visibility:hidden; ";
                     $classg=" {$grupo_classe} ";
                 }
                 $classsituacao="situacao";
                 $ems_cor = "#004080";
                 $ems_cor1= "#FFFFFF";
                 $ems_descricao = $texto_cab;
                 // coluna tem conteúdo
                 
                 
                 echo "    <td class='{$classg}'  style=' {$disp} ' > ";
                     echo "<div id='pen_nomenclatura' title='{$hintw}' onclick='return chama(".'"'.$des_prefixo.'", '.'"'.$cod_funcao.'", "'.$grupo_classe.'"'.")  ;' >";
                         /*
                         if ($mostratopo==1)
                         {
                             echo "<span class='$classsituacao' style='background:{$ems_cor}; color:{$ems_cor1}; font-size:11px; font-weight: bold;'>".$ems_descricao."</span>";
                         }
                         else
                         {

                             echo "<span class='$classsituacao' style='background:transparent; color:#{$ems_cor1}; font-size:8px;'>a</span>";
                         }
                         */
                         $img      = $imagem;
                         echo "<a style='color:#000000;'>";
                         $pathw = $path.$img;
                         echo '<img style="padding-top:3px;" src="'.$pathw.'" width="80" height="80"  border="0" />';
                         echo '</a>';
                         if ($mostratopo==1)
                         {
                             echo "<span class='$classsituacao' style='background:{$ems_cor}; color:{$ems_cor1}; font-size:11px; font-weight: bold;'>".$ems_descricao."</span>";
                         }
                         else
                         {
                             echo "<span class='$classsituacao' style='background:transparent; color:#{$ems_cor1}; font-size:8px;'>a</span>";
                         }
                     echo '</div>';
                 echo '    </td> ';
                 break;
             }
             else
             {
                echo '    <td> ';
                echo "<div id='pen_nomenclatura_v' title='' >";
                $img      = $imagem_nula;
                echo "<a style='color:#000000;'>";
                $pathw = $path.$img;
                echo '<img style="padding-top:3px;" src="'.$pathw.'" width="80" height="80"  border="0" />';
                echo '</a>';
                echo '</div>';
                echo '    </td> ';
             }
         }
         
    }
}
//
// Complementar coluna
//
if  ($rs->rows==0)
{
     echo '    </tr> ';
}
for ($c = $col; $c <= $num_col_tab; $c++) {
    echo '  <td> ';
    echo "<div id='pen_nomenclatura_v' title='' ' >";
    $img      = $imagem_nula;
    echo "<a style='color:#000000;'>";
    $pathw = $path.$img;
    echo '<img style="padding-top:3px;" src="'.$pathw.'" width="80" height="80"  border="0" />';
    echo '</a>';
    echo '</div>';
    echo '  </td> ';
}
echo '    </tr> ';
// complementar linhas
for ($c = $lin; $c < $num_lin_tab; $c++) {
    echo '    <tr> ';
    for ($cx = 0; $cx <= $num_col_tab; $cx++) {
        echo '    <td> ';
        echo "<div id='pen_nomenclatura_v' title='' >";
        $img      = $imagem_nula;
        echo "<a style='color:#000000;'>";
        $pathw = $path.$img;
        echo '<img style="padding-top:3px;" src="'.$pathw.'" width="80" height="80"  border="0" />';
        echo '</a>';
        echo '</div>';
        echo '    </td> ';
    }
    echo '    </tr> ';
}


/*
echo '    <tr> ';


// linha 1

for ($c = 0; $c < $num_col_tab; $c++) {

echo '    <td> ';






echo "<div id='pen_nomenclatura' title='Tabelas de Nomenclaturas' onclick='return pen_nomenclatura();' >";
$img      = 'pen_nomenclatura.png';
$nm_desc  = 'Tabelas de Nomenclaturas';
echo "<a >";
$pathw = $path.$img;
echo '<img style="padding:5px;" src="'.$pathw.'" width="100" height="100"  border="0" />';
//echo $nm_desc;
echo '</a>';
echo '</div>';
echo '    </td> ';

}
echo '    </tr> ';

// linha 2

echo '    <tr> ';
for ($c = 0; $c < $num_col_tab; $c++) {

echo '    <td> ';
echo "<div id='pen_nomenclatura' title='Tabelas de Nomenclaturas' onclick='return pen_nomenclatura();' >";
$img      = 'pen_nomenclatura.png';
$nm_desc  = 'Tabelas de Nomenclaturas';
echo "<a >";
$pathw = $path.$img;
echo '<img style="padding:5px;" src="'.$pathw.'" width="100" height="100"  border="0" />';
//echo $nm_desc;
echo '</a>';
echo '</div>';
echo '    </td> ';

}

echo '    </tr> ';

*/




echo '</table>';




echo '</div>';

?>

<script type="text/javascript">

var g_aberto = '<?php echo $g_aberto; ?>' ;



function   chama(prefixo,menu,grupo_classe)
{

  //var voltar  = 'conteudo.php?prefixo=mod&menu=pla_menu';
  

  
  var voltar = 'mod__idc_menu__'+g_aberto;

  if (prefixo!='janela')
  {
      if (prefixo=='grupo')
      {
          $("."+grupo_classe).each(function () {
                 var vis = $(this).css("visibility");
                 if (vis=="hidden")
                 {
                     $(this).css("visibility", "visible");
                     g_aberto = grupo_classe;
                 }
                 else
                 {
                     $(this).css("visibility", "hidden");
                     g_aberto = "";
                 }
          });
      }
      else
      {
          self.location = 'conteudo.php?prefixo='+prefixo+'&menu='+menu+'&elemento=0'+'&voltar='+voltar;
      }
      /////self.location = 'conteudo.php?prefixo='+prefixo+'&menu='+menu+'&elemento=0';
  }
  else
  {
    // alert(' chama '+menu);
    var  left   = 0;
    var  top    = 0;
    var  height = $(window).height();
    var  width  = $(window).width();
    var link_MenuAlt=menu;
    MenuAlt_so =  window.open(link_MenuAlt,"MenuAlt","left="+left+",top="+top+",width="+width+",height="+height+",resizable=yes,menubar=no,scrollbars=yes,toolbar=no");
    MenuAlt_so.focus();
  }
  return false;
}


function fecha_grupo(grupo)
{
    var id = 'img_grupo_'+grupo;
    var img = $(id);
    if (img.attr('src') == 'imagens/seta_cima.png') {
        img.attr('src', 'imagens/seta_baixo.png');
    }
    else
    {
        img.attr('src', 'imagens/seta_cima.png');
    }
   // alert (' ======= '+id);
    var classe_grupo='.classe_grupo_'+grupo;
    $(classe_grupo).each(function () {
        $(this).toggle();
    });

    return false;
}



      if (g_aberto!='')
      {
          var g_aberto
          $("."+g_aberto).each(function () {
              $(this).css("visibility", "visible");
          });
      }


</script>